'use strict';

describe('factory: foursquareApi', function () {

  // load the module
  beforeEach(module('testApp'));

  var foursquareApi,
    scope,
    $httpBackend,
    fakeData = {"meta":{"code":200},"response":{"venues":[{"id":"4b5061def964a520cb2127e3","name":"PizzaExpress","location":{"address":"450 Strand","lat":51.50836851,"lng":-0.126063824,"postalCode":"WC2R 0RG","cc":"GB","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["450 Strand","London","Greater London","WC2R 0RG","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":2329,"usersCount":1983,"tipCount":26},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"191","referralId":"v-1438458045"},{"id":"4bc6005242419521ca66031d","name":"Pizza Hut","location":{"address":"56\/59 Strand","lat":51.50954376090435,"lng":-0.12329578399658203,"postalCode":"WC2N 5LR","cc":"GB","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["56\/59 Strand","London","Greater London","WC2N 5LR","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":1080,"usersCount":871,"tipCount":17},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"228","referralId":"v-1438458045"},{"id":"4ac518e6f964a52019ab20e3","name":"Gourmet Pizza Co.","location":{"address":"59-65 Upper Ground, South Bank","crossStreet":"at The Queen's Walk","lat":51.50813172003565,"lng":-0.11013970709753636,"postalCode":"SE1 9PP","cc":"GB","neighborhood":"South Bank, London, Greater London","city":"South Bank","state":"Greater London","country":"United Kingdom","formattedAddress":["59-65 Upper Ground, South Bank (at The Queen's Walk)","South Bank","Greater London","SE1 9PP","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":1451,"usersCount":1213,"tipCount":35},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":5,"summary":"5 people are here","groups":[{"type":"others","name":"Other people here","count":5,"items":[]}]},"referralId":"v-1438458045"},{"id":"51dfcc1a498e1abc7c95e3e4","name":"Pizza Pilgrims","location":{"address":"11-12 Dean St","crossStreet":"at Carlisle St","lat":51.514862891408875,"lng":-0.13324362878296225,"postalCode":"W1D 3RP","cc":"GB","city":"Soho","state":"Greater London","country":"United Kingdom","formattedAddress":["11-12 Dean St (at Carlisle St)","Soho","Greater London","W1D 3RP","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":1803,"usersCount":1297,"tipCount":121},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1438458045"},{"id":"4bcd8f10fb84c9b6f022223e","name":"Pizza Hut","location":{"address":"19 Leicester Square","lat":51.51096585009052,"lng":-0.1296070298818235,"postalCode":"WC2H 7LE","cc":"GB","city":"Leicester Square","state":"Greater London","country":"United Kingdom","formattedAddress":["19 Leicester Square","Leicester Square","Greater London","WC2H 7LE","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":1573,"usersCount":1347,"tipCount":10},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"178","referralId":"v-1438458045"},{"id":"4c41b1e6520fa5935af3c9ac","name":"Pizza Hut","location":{"address":"29-31 Regent St","lat":51.509533370145796,"lng":-0.13460250237744226,"postalCode":"SW1Y 4NQ","cc":"GB","city":"Piccadilly","state":"Greater London","country":"United Kingdom","formattedAddress":["29-31 Regent St","Piccadilly","Greater London","SW1Y 4NQ","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":1489,"usersCount":1345,"tipCount":14},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"472","referralId":"v-1438458045"},{"id":"4ac518dbf964a520f7a820e3","name":"Pizza Piazza","location":{"address":"39 Charing Cross Road","lat":51.51151690369293,"lng":-0.12802535679395896,"postalCode":"WC2H 0AR","cc":"GB","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["39 Charing Cross Road","London","Greater London","WC2H 0AR","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":138,"usersCount":132,"tipCount":2},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1438458045"},{"id":"4c52088f2543a593d8f8dd84","name":"Pizza","location":{"address":"1 Shepherd Street","lat":51.510703005181824,"lng":-0.14377389820299535,"postalCode":"W1J 7HJ","cc":"GB","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["1 Shepherd Street","London","Greater London","W1J 7HJ","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":15,"usersCount":13,"tipCount":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1438458045"},{"id":"4bd9c43de914a59388cf57fa","name":"Pizza Hut","location":{"address":"1A Henrietta Street","lat":51.51153804366688,"lng":-0.12280686693700824,"postalCode":"WC2E 8PS","cc":"GB","city":"Covent Garden","state":"Greater London","country":"United Kingdom","formattedAddress":["1A Henrietta Street","Covent Garden","Greater London","WC2E 8PS","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":179,"usersCount":170,"tipCount":1},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"347","referralId":"v-1438458045"},{"id":"53cc1e0f498e11624ec96793","name":"Pizza Pilgrims","location":{"address":"11 Kingly St","lat":51.51267513716483,"lng":-0.13870179037936223,"postalCode":"W1B 5PW","cc":"GB","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["11 Kingly St","London","Greater London","W1B 5PW","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":658,"usersCount":548,"tipCount":37},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1438458045"},{"id":"5570465a498eb53da6d0e9d4","name":"Pizza Union","location":{"address":"246 - 250 Pentonville Rd","crossStreet":"Kings Cross Rd","lat":51.53101817263947,"lng":-0.11962639712380942,"postalCode":"N1 9JY","cc":"GB","neighborhood":"Kings Cross","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["246 - 250 Pentonville Rd (Kings Cross Rd)","London","Greater London","N1 9JY","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":117,"usersCount":72,"tipCount":5},"specials":{"count":0,"items":[]},"hereNow":{"count":1,"summary":"One other person is here","groups":[{"type":"others","name":"Other people here","count":1,"items":[]}]},"referralId":"v-1438458045"},{"id":"4b5e09fef964a520747a29e3","name":"Pizza Express","location":{"address":"85 Victoria St","lat":51.49766,"lng":-0.1353527,"postalCode":"SW1H 0HW","cc":"GB","city":"City of Westminster","state":"Greater London","country":"United Kingdom","formattedAddress":["85 Victoria St","City of Westminster","Greater London","SW1H 0HW","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":788,"usersCount":661,"tipCount":10},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"235","referralId":"v-1438458045"},{"id":"4ad75c2df964a520cd0921e3","name":"Pizza East","location":{"address":"56 Shoreditch High St","crossStreet":"Tea Building","lat":51.52372237106589,"lng":-0.07706126863679272,"postalCode":"E1 6JJ","cc":"GB","city":"Shoreditch","state":"Greater London","country":"United Kingdom","formattedAddress":["56 Shoreditch High St (Tea Building)","Shoreditch","Greater London","E1 6JJ","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":10359,"usersCount":6768,"tipCount":251},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"venuePage":{"id":"69979874"},"referralId":"v-1438458045"},{"id":"4ae0a577f964a5203e8121e3","name":"PizzaExpress","location":{"address":"80-81 St Martin's Ln","lat":51.51131993,"lng":-0.127308369,"postalCode":"WC2N 4AA","cc":"GB","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["80-81 St Martin's Ln","London","Greater London","WC2N 4AA","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":1180,"usersCount":1032,"tipCount":14},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"240","referralId":"v-1438458045"},{"id":"4b58dd13f964a5207c6f28e3","name":"PizzaExpress","location":{"address":"Panton House","crossStreet":"26 Haymarket","lat":51.50928945,"lng":-0.132361507,"postalCode":"SW1Y 4EN","cc":"GB","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["Panton House (26 Haymarket)","London","Greater London","SW1Y 4EN","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":997,"usersCount":888,"tipCount":14},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"12","referralId":"v-1438458045"},{"id":"4cb1baa61463a143ada1a7a9","name":"Pizza Hut","location":{"address":"523 Oxford St","lat":51.51369876157045,"lng":-0.15731363610214327,"postalCode":"W1C 2QJ","cc":"GB","city":"Marble Arch","state":"Greater London","country":"United Kingdom","formattedAddress":["523 Oxford St","Marble Arch","Greater London","W1C 2QJ","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":1655,"usersCount":1444,"tipCount":16},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"214","referralId":"v-1438458045"},{"id":"4b1a6152f964a5208de923e3","name":"Pizza rico","location":{"address":"15\/18 Great Newport St","lat":51.5118828,"lng":-0.128152,"postalCode":"WC2H 7JE","cc":"GB","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["15\/18 Great Newport St","London","Greater London","WC2H 7JE","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":11,"usersCount":11,"tipCount":1},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1438458045"},{"id":"4c3787dd18e72d7fffb516f5","name":"Pizza Hut","location":{"address":"150 Southampton Row","lat":51.521374681396225,"lng":-0.12385368347167969,"postalCode":"WC1B 5AL","cc":"GB","city":"Russell Square","country":"United Kingdom","formattedAddress":["150 Southampton Row","Russell Square","WC1B 5AL","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":469,"usersCount":332,"tipCount":7},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"426","referralId":"v-1438458045"},{"id":"4ac518daf964a520c9a820e3","name":"PizzaExpress","location":{"address":"10 Dean St","lat":51.51499635515917,"lng":-0.133289894555046,"postalCode":"W1D 3RW","cc":"GB","city":"Soho","state":"Greater London","country":"United Kingdom","formattedAddress":["10 Dean St","Soho","Greater London","W1D 3RW","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":2019,"usersCount":1655,"tipCount":21},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"315","referralId":"v-1438458045"},{"id":"50b4ef2f21c684eec9250f42","name":"Pizza Hut","location":{"address":"53-54 Haymarket","crossStreet":"Coventry Street","lat":51.50938680088598,"lng":-0.1325570814271,"postalCode":"SW1Y 4RP","cc":"GB","city":"Greater London","state":"Greater London","country":"United Kingdom","formattedAddress":["53-54 Haymarket (Coventry Street)","Greater London","Greater London","SW1Y 4RP","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":421,"usersCount":397,"tipCount":6},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"121","referralId":"v-1438458045"},{"id":"4b745125f964a520bfd42de3","name":"PizzaExpress","location":{"address":"29 Wardour St","lat":51.51122538,"lng":-0.132009294,"postalCode":"W1D 6PS","cc":"GB","city":"Soho","state":"Greater London","country":"United Kingdom","formattedAddress":["29 Wardour St","Soho","Greater London","W1D 6PS","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":549,"usersCount":492,"tipCount":12},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"109","referralId":"v-1438458045"},{"id":"4c0677a9d3842d7f9ea2bf41","name":"Pizza Hut Express","location":{"address":"Food Court, The Plaza","crossStreet":"Oxford St","lat":51.51633450236176,"lng":-0.1366907996405285,"postalCode":"W1N 9DP","cc":"GB","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["Food Court, The Plaza (Oxford St)","London","Greater London","W1N 9DP","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":84,"usersCount":77,"tipCount":4},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1438458045"},{"id":"51f6cf60498ed7f7f641938a","name":"Pizza Union","location":{"address":"25 Sandy's Row","crossStreet":"Frying Pan Alley","lat":51.51763364577582,"lng":-0.07746911855326909,"postalCode":"E1 7HS","cc":"GB","city":"Spitalfields","state":"Greater London","country":"United Kingdom","formattedAddress":["25 Sandy's Row (Frying Pan Alley)","Spitalfields","Greater London","E1 7HS","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":1153,"usersCount":674,"tipCount":42},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1438458045"},{"id":"4ad39ceef964a5202fe520e3","name":"PizzaExpress","location":{"address":"20 Greek St","lat":51.513829,"lng":-0.130384,"postalCode":"W1D 4DU","cc":"GB","city":"Soho","state":"Greater London","country":"United Kingdom","formattedAddress":["20 Greek St","Soho","Greater London","W1D 4DU","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":657,"usersCount":509,"tipCount":7},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"49","referralId":"v-1438458045"},{"id":"514a02d5e4b05d9357477b2b","name":"Pizza Ristoranti Italiano","location":{"lat":51.514780627145484,"lng":-0.1229906296038211,"cc":"GB","country":"United Kingdom","formattedAddress":["United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d110941735","name":"Italian Restaurant","pluralName":"Italian Restaurants","shortName":"Italian","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/italian_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":4,"usersCount":4,"tipCount":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1438458045"},{"id":"4b16c598f964a52037bd23e3","name":"Pizza Express","location":{"address":"25 Millbank","lat":51.49304745,"lng":-0.125184059,"postalCode":"SW1P 4QP","cc":"GB","city":"Millbank","state":"Greater London","country":"United Kingdom","formattedAddress":["25 Millbank","Millbank","Greater London","SW1P 4QP","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":738,"usersCount":495,"tipCount":12},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"203","referralId":"v-1438458045"},{"id":"4afb35c0f964a5201b1c22e3","name":"Pizza Express","location":{"address":"316 Kennington Rd","lat":51.48716645,"lng":-0.111519968,"postalCode":"SE11 4LD","cc":"GB","city":"Kennington","state":"Greater London","country":"United Kingdom","formattedAddress":["316 Kennington Rd","Kennington","Greater London","SE11 4LD","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":431,"usersCount":230,"tipCount":8},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"213","referralId":"v-1438458045"},{"id":"556dfffc498e31edb7c56c5b","name":"Pizza 4 feuilles","location":{"address":"Riadh Andalous","lat":51.50998,"lng":-0.1337,"cc":"GB","city":"Ariana","country":"United Kingdom","formattedAddress":["Riadh Andalous","Ariana","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":1,"usersCount":1,"tipCount":0},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1438458045"},{"id":"4f535cffd5fb7affc7821c63","name":"Pizza Pilgrims Van","location":{"address":"Berwick Street Market","lat":51.51306932272445,"lng":-0.13441085815429688,"postalCode":"W1F 8TW","cc":"GB","city":"Soho","state":"Greater London","country":"United Kingdom","formattedAddress":["Berwick Street Market","Soho","Greater London","W1F 8TW","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1cb941735","name":"Food Truck","pluralName":"Food Trucks","shortName":"Food Truck","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/streetfood_","suffix":".png"},"primary":true}],"verified":false,"stats":{"checkinsCount":188,"usersCount":135,"tipCount":11},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"referralId":"v-1438458045"},{"id":"4b2e32cdf964a52041dd24e3","name":"PizzaExpress","location":{"address":"9-12 Bow St","lat":51.51353978,"lng":-0.122722744,"postalCode":"WC2E 7AH","cc":"GB","city":"London","state":"Greater London","country":"United Kingdom","formattedAddress":["9-12 Bow St","London","Greater London","WC2E 7AH","United Kingdom"]},"categories":[{"id":"4bf58dd8d48988d1ca941735","name":"Pizza Place","pluralName":"Pizza Places","shortName":"Pizza","icon":{"prefix":"https:\/\/ss3.4sqi.net\/img\/categories_v2\/food\/pizza_","suffix":".png"},"primary":true}],"verified":true,"stats":{"checkinsCount":876,"usersCount":748,"tipCount":6},"hasMenu":true,"specials":{"count":0,"items":[]},"hereNow":{"count":0,"summary":"Nobody here","groups":[]},"storeId":"131","referralId":"v-1438458045"}],"geocode":{"what":"","where":"london","feature":{"cc":"GB","name":"London","displayName":"London, Greater London, United Kingdom","matchedName":"London, Greater London, United Kingdom","highlightedName":"<b>London<\/b>, Greater London, United Kingdom","woeType":7,"slug":"london","id":"geonameid:2643743","longId":"72057594040571679","geometry":{"center":{"lat":51.50853,"lng":-0.12574},"bounds":{"ne":{"lat":51.691643999655895,"lng":0.33418999705203406},"sw":{"lat":51.28467404417054,"lng":-0.5085579279369435}}}},"parents":[]}}};

  // Initialize and a mock scope
  beforeEach(inject(function ($injector, $rootScope) {
    scope = $rootScope.$new();

    foursquareApi = $injector.get('foursquareApi');
    $httpBackend = $injector.get('$httpBackend');

    $httpBackend.when('GET', 'views/main.html').respond('a', 200);
  }));


  it('factory should exists', function(){
    expect(foursquareApi).toBeDefined();
  });

  it('venues.searchVenue() should return object', function(){

    $httpBackend.when('GET', 'https://api.foursquare.com/v2/venues/explore?client_id=L1VH4GBLNWJO5GC51EGLYXGVQQFCL1P322GNELHE5AORKLKD&client_secret=PJAIAIK5W4YMBB5M24FNG2JJMR50NR3TASEQA13VYIPTLWMD&m=foursquare&near=London&v=20140806').respond(fakeData);
    $httpBackend.expectGET('https://api.foursquare.com/v2/venues/explore?client_id=L1VH4GBLNWJO5GC51EGLYXGVQQFCL1P322GNELHE5AORKLKD&client_secret=PJAIAIK5W4YMBB5M24FNG2JJMR50NR3TASEQA13VYIPTLWMD&m=foursquare&near=London&v=20140806');

    foursquareApi.venues.searchVenue('London').then(function(r){
      expect(typeof r).toBe('object');
    });

    $httpBackend.flush();

  });

});
